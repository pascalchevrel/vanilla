<?php

declare(strict_types=1);

namespace Vanilla\Stats;

/*
    This is Firefox data per country for Desktop from Statcounter
    https://gs.statcounter.com/browser-market-share/desktop/europe
 */
class Statcounter
{
    protected $data_stamp = '2025-05-06';

    /*
        https://radar.cloudflare.com/charts/TopBrowsersXY/fetch?dateRange=52w&amp;location=es&limit=1000
        https://api.cloudflare.com/client/v4/radar/http/top/browsers
        Data only reachable in the browser behind a captcha.
        There is a paying API with auth.
     */
    public array $market_share = [
        'ES' => [
            '2024-04' => 7.21,
            '2024-05' => 7.33,
            '2024-06' => 7.71,
            '2024-07' => 7.81,
            '2024-08' => 7.48,
            '2024-09' => 6.85,
            '2024-10' => 6.12,
            '2024-11' => 6.44,
            '2024-12' => 7.28,
            '2025-01' => 6.06,
            '2025-02' => 6.45,
            '2025-03' => 6.06,
            '2025-04' => 6.45,
            ],
        'GR' => [
            '2024-04' => 12.13,
            '2024-05' => 12.07,
            '2024-06' => 12.67,
            '2024-07' => 13.34,
            '2024-08' => 12.16,
            '2024-09' => 12.94,
            '2024-10' => 12.56,
            '2024-11' => 12.59,
            '2024-12' => 12.19,
            '2025-01' => 11.92,
            '2025-02' => 11.26,
            '2025-03' => 10.52,
            '2025-04' => 10.34,
            ],
        'IT' => [
            '2024-04' => 10.46,
            '2024-05' => 12.03,
            '2024-06' => 13.49,
            '2024-07' => 12.87,
            '2024-08' => 12.47,
            '2024-09' => 10.22,
            '2024-10' => 9.87,
            '2024-11' => 9.62,
            '2024-12' => 7.96,
            '2025-01' => 8.99,
            '2025-02' => 9.56,
            '2025-03' => 8.85,
            '2025-04' => 8.83,
            ],
        'PT' => [
            '2024-04' => 6,
            '2024-05' => 10.42,
            '2024-06' => 12.34,
            '2024-07' => 6.24,
            '2024-08' => 5.25,
            '2024-09' => 4.88,
            '2024-10' => 4.48,
            '2024-11' => 4.08,
            '2024-12' => 3.27,
            '2025-01' => 4.61,
            '2025-02' => 4.66,
            '2025-03' => 4.47,
            '2025-04' => 4.7,
            ],
        'RO' => [
            '2024-04' => 4.92,
            '2024-05' => 4.87,
            '2024-06' => 5.27,
            '2024-07' => 6.58,
            '2024-08' => 6.13,
            '2024-09' => 5.47,
            '2024-10' => 5.84,
            '2024-11' => 5.75,
            '2024-12' => 5.67,
            '2025-01' => 5.75,
            '2025-02' => 5.31,
            '2025-03' => 5.16,
            '2025-04' => 4.51,
            ],
        'RS' => [
            '2024-04' => 12.23,
            '2024-05' => 11.15,
            '2024-06' => 11.02,
            '2024-07' => 10.91,
            '2024-08' => 10.68,
            '2024-09' => 10.72,
            '2024-10' => 11.2,
            '2024-11' => 10.47,
            '2024-12' => 10.09,
            '2025-01' => 10.02,
            '2025-02' => 9.63,
            '2025-03' => 9.08,
            '2025-04' => 8.43,
            ],
    ];

    public function __construct(public string $country_code) {

    }

    public function getShare(string $year, string $month) : float
    {
        return $this->market_share[$this->country_code]["{$year}-{$month}"] ?? 0;
    }

}
